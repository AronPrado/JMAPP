Index: app/src/main/java/com/javierprado/jmapp/view/login/LoginActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.javierprado.jmapp.view.login\r\n\r\nimport android.content.Intent\r\nimport android.os.Bundle\r\nimport android.text.Editable\r\nimport android.text.TextWatcher\r\nimport android.widget.Button\r\nimport android.widget.EditText\r\nimport android.widget.TextView\r\nimport android.widget.Toast\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport com.javierprado.jmapp.R\r\nimport com.javierprado.jmapp.data.util.RoleType\r\nimport com.javierprado.jmapp.data.util.AuthFunctions\r\nimport com.javierprado.jmapp.data.util.ExtraFunctions\r\nimport com.javierprado.jmapp.view.activities.editar.ResetPasswordActivity\r\nimport com.javierprado.jmapp.view.activities.menus.MenuApoderadoActivity\r\n\r\nclass LoginActivity : AppCompatActivity() {\r\n    private lateinit var emailEditText: EditText\r\n    private lateinit var passwordEditText: EditText\r\n    private lateinit var btnLogin: Button\r\n    private var extraF: ExtraFunctions = ExtraFunctions()\r\n    override fun onCreate(savedInstanceState: Bundle?)  {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_login)\r\n\r\n        emailEditText = findViewById(R.id.emailEditText)\r\n        passwordEditText = findViewById(R.id.passwordEditText)\r\n        btnLogin = findViewById(R.id.btn_inicioSesion)\r\n        val olvidasteContrasena = findViewById<TextView>(R.id.olvidasteContrasena)\r\n\r\n        val authFunctions = AuthFunctions()\r\n        // Deshabilitar el botón de inicio de sesión al inicio\r\n        btnLogin.isEnabled = false\r\n        // Agregar TextWatchers a los EditTexts\r\n        emailEditText.addTextChangedListener(textWatcher)\r\n        passwordEditText.addTextChangedListener(textWatcher)\r\n\r\n        btnLogin.setOnClickListener {\r\n            val emailUser = emailEditText.text.toString().trim()\r\n            val passUser = passwordEditText.text.toString().trim()\r\n\r\n//            extraF.crearCanalNoti(this)\r\n//            extraF.crearNoti(\"PRUEBA CUERPO\", \"TITULO GRANDE\", this)\r\n\r\n            if (emailUser.isEmpty() || passUser.isEmpty()) {\r\n                Toast.makeText(this, \"Ingresar los datos\", Toast.LENGTH_SHORT).show()\r\n            } else {\r\n                authFunctions.loginUser(emailUser, passUser, RoleType.APOD.name, this, MenuApoderadoActivity())\r\n            }\r\n        }\r\n\r\n        olvidasteContrasena.setOnClickListener {\r\n            val intent = Intent(this, ResetPasswordActivity::class.java)\r\n            startActivity(intent)\r\n            finish()\r\n        }\r\n    }\r\n    private val textWatcher = object : TextWatcher {\r\n        override fun afterTextChanged(s: Editable?) {\r\n        }\r\n\r\n        override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {\r\n        }\r\n\r\n        override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {\r\n            val emailInput = emailEditText.text.toString().trim()\r\n            val passwordInput = passwordEditText.text.toString().trim()\r\n\r\n            // Habilitar el botón de inicio de sesión si ambos campos no están vacíos\r\n            btnLogin.isEnabled = emailInput.isNotEmpty() && passwordInput.isNotEmpty()\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/javierprado/jmapp/view/login/LoginActivity.kt b/app/src/main/java/com/javierprado/jmapp/view/login/LoginActivity.kt
--- a/app/src/main/java/com/javierprado/jmapp/view/login/LoginActivity.kt	(revision c1aa4bdc4442c527da4d4676528490a2d372f19b)
+++ b/app/src/main/java/com/javierprado/jmapp/view/login/LoginActivity.kt	(date 1713157322270)
@@ -32,7 +32,9 @@
 
         val authFunctions = AuthFunctions()
         // Deshabilitar el botón de inicio de sesión al inicio
+
         btnLogin.isEnabled = false
+
         // Agregar TextWatchers a los EditTexts
         emailEditText.addTextChangedListener(textWatcher)
         passwordEditText.addTextChangedListener(textWatcher)
Index: app/src/main/java/com/javierprado/jmapp/data/retrofit/RetrofitHelper.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.javierprado.jmapp.data.retrofit\r\n\r\nimport okhttp3.HttpUrl\r\nimport okhttp3.Interceptor\r\nimport okhttp3.OkHttpClient\r\nimport okhttp3.Request\r\nimport okhttp3.Response\r\nimport retrofit2.Retrofit\r\nimport retrofit2.converter.gson.GsonConverterFactory\r\nimport java.io.IOException\r\n\r\n\r\nclass RetrofitHelper private constructor() {\r\n//    private val BASE_URL = \"https://colegio-api-jma-f0c7750337fe.herokuapp.com/\"\r\n//    private val BASE_URL = \"https://colegio-api.onrender.com/\"\r\n//    private val BASE_URL = \"http://api-firestore-colegio.sa-east-1.elasticbeanstalk.com/\"\r\n    private val BASE_URL = \"http://192.168.100.2:8090/\"\r\n    private var api: ColegioAPI\r\n    private var bearerToken = \"\"\r\n    private val client = OkHttpClient.Builder()\r\n        .addInterceptor(AuthInterceptor())\r\n        .build()\r\n    val gson = GsonConfig.createGson()\r\n    init {\r\n        val retrofit = Retrofit.Builder()\r\n            .baseUrl(BASE_URL)\r\n            .addConverterFactory(GsonConverterFactory.create(gson))\r\n//            .addConverterFactory(JacksonConverterFactory.create(objectMapper))\r\n            .client(client)\r\n            .build()\r\n        api = retrofit.create(ColegioAPI::class.java)\r\n    }\r\n    companion object {\r\n        private val instance: RetrofitHelper by lazy { RetrofitHelper() }\r\n\r\n        @JvmStatic\r\n        fun getInstanceStatic(): RetrofitHelper {\r\n            return instance\r\n        }\r\n    }\r\n\r\n    fun getApi(): ColegioAPI {\r\n        return api\r\n    }\r\n\r\n    fun setBearerToken(token: String) {\r\n        bearerToken = token\r\n    }\r\n\r\n    fun getBearerToken(): String {\r\n        return bearerToken\r\n    }\r\n\r\n    private inner class AuthInterceptor : Interceptor {\r\n        @Throws(IOException::class)\r\n        override fun intercept(chain: Interceptor.Chain): Response {\r\n            val originalRequest: Request = chain.request()\r\n            val originalHttpUrl: HttpUrl = originalRequest.url\r\n\r\n            val url: HttpUrl = originalHttpUrl.newBuilder().build()\r\n\r\n            val requestBuilder: Request.Builder = originalRequest.newBuilder()\r\n            if (bearerToken.isNotEmpty()) {\r\n                requestBuilder.header(\"Authorization\", bearerToken)\r\n            }\r\n\r\n            val newRequest: Request = requestBuilder.url(url).build()\r\n\r\n            return chain.proceed(newRequest)\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/javierprado/jmapp/data/retrofit/RetrofitHelper.kt b/app/src/main/java/com/javierprado/jmapp/data/retrofit/RetrofitHelper.kt
--- a/app/src/main/java/com/javierprado/jmapp/data/retrofit/RetrofitHelper.kt	(revision c1aa4bdc4442c527da4d4676528490a2d372f19b)
+++ b/app/src/main/java/com/javierprado/jmapp/data/retrofit/RetrofitHelper.kt	(date 1713157906115)
@@ -13,8 +13,8 @@
 class RetrofitHelper private constructor() {
 //    private val BASE_URL = "https://colegio-api-jma-f0c7750337fe.herokuapp.com/"
 //    private val BASE_URL = "https://colegio-api.onrender.com/"
-//    private val BASE_URL = "http://api-firestore-colegio.sa-east-1.elasticbeanstalk.com/"
-    private val BASE_URL = "http://192.168.100.2:8090/"
+    private val BASE_URL = "http://api-firestore-colegio.sa-east-1.elasticbeanstalk.com/"
+//    private val BASE_URL = "http://192.168.100.2:8090/"
     private var api: ColegioAPI
     private var bearerToken = ""
     private val client = OkHttpClient.Builder()
Index: app/src/main/java/com/javierprado/jmapp/view/fragments/RegistroAsistenciaFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.javierprado.jmapp.view.fragments\r\n\r\nimport android.content.Context\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport androidx.fragment.app.Fragment\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.Button\r\nimport android.widget.TextView\r\nimport android.widget.Toast\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.recyclerview.widget.LinearLayoutManager\r\nimport androidx.recyclerview.widget.RecyclerView\r\nimport com.google.android.material.progressindicator.CircularProgressIndicator\r\nimport com.javierprado.jmapp.R\r\nimport com.javierprado.jmapp.data.entities.Asistencia\r\nimport com.javierprado.jmapp.data.retrofit.RetrofitHelper\r\nimport com.javierprado.jmapp.notificaciones.NotificacionesJMA\r\nimport com.javierprado.jmapp.view.activities.control.ControlSeleccionActivity\r\nimport com.javierprado.jmapp.view.activities.menus.MenuAdministradorActivity\r\nimport com.javierprado.jmapp.view.activities.menus.MenuDocenteActivity\r\nimport com.javierprado.jmapp.view.adapters.AsistenciaAdapter\r\nimport com.javierprado.jmapp.view.clicks.AsistenciaClick\r\nimport retrofit2.Call\r\nimport retrofit2.Callback\r\nimport retrofit2.Response\r\nimport java.io.Serializable\r\nimport java.time.LocalDate\r\n\r\nclass RegistroAsistenciaFragment : Fragment() {\r\n    private lateinit var recycler: RecyclerView\r\n    private lateinit var btnRegistrar: Button\r\n    private lateinit var fechaAsistencia: TextView\r\n\r\n    private lateinit var progressC: CircularProgressIndicator\r\n\r\n    private lateinit var adapter : AsistenciaAdapter\r\n    private lateinit var estudiantes: List<String>\r\n    private var asistencias: MutableList<Asistencia> = ArrayList()\r\n\r\n    var docenteId = \"\"; var cursoId = \"\"\r\n\r\n    private val TAG: String  = toString()\r\n    private val retro = RetrofitHelper.getInstanceStatic()\r\n    private lateinit var activity: AppCompatActivity\r\n    private lateinit var msg : String\r\n    override fun onAttach(context: Context) {\r\n        super.onAttach(context)\r\n        activity = context as ControlSeleccionActivity\r\n    }\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        arguments?.let {\r\n            retro.setBearerToken(it.getString(MenuAdministradorActivity().TOKEN, \"\"))\r\n            estudiantes = it.getStringArrayList(MenuDocenteActivity().ESTUDIANTES)?.toList() ?: ArrayList()\r\n            docenteId = it.getString(MenuAdministradorActivity().USUARIOID, \"\")\r\n            cursoId = it.getString(MenuDocenteActivity().CURSOID, \"\")\r\n        }\r\n    }\r\n\r\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\r\n        val view = inflater.inflate(R.layout.fragment_registro_asistencia, container, false)\r\n        recycler = view.findViewById(R.id.recycler_asistencias)\r\n        fechaAsistencia = view.findViewById(R.id.fecha_asistencia)\r\n        btnRegistrar = view.findViewById(R.id.btn_registrar_asistencia)\r\n        progressC = view.findViewById(R.id.pb_registrar_asistencias)\r\n        return view\r\n    }\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n        val api = retro.getApi()\r\n\r\n        val fecha = LocalDate.now().toString()\r\n        fechaAsistencia.text = fecha\r\n        adapter = AsistenciaAdapter(ArrayList(), object: AsistenciaClick {\r\n            override fun onAsistenciaClicker(asistencia: Asistencia?) {\r\n                Toast.makeText(activity, \"CAMBIAR ESTADO DE ASISTENCIA\", Toast.LENGTH_SHORT).show()\r\n//                val fragment = extraF.obtenerFragment(direct)\r\n//                                .newInstance(horario!!, retro.getBearerToken())\r\n//                activity.supportFragmentManager.beginTransaction()\r\n//                    .replace(R.id.fcv_docente_main, fragment).addToBackStack(TAG).commit()\r\n            }\r\n        })\r\n        recycler.layoutManager = LinearLayoutManager(context)\r\n        recycler.adapter = adapter\r\n\r\n        progressC.visibility = View.VISIBLE\r\n        api.listarAsistencias(estudiantes, fecha, cursoId, docenteId ).enqueue(object : Callback<List<Asistencia>> {\r\n            override fun onResponse(call: Call<List<Asistencia>>, response: Response<List<Asistencia>>) {\r\n                msg = response.headers()[\"message\"] ?: \"\"\r\n                if (response.isSuccessful) {\r\n                    asistencias = response.body()!!.toList() as MutableList<Asistencia>\r\n                    adapter.setAsistencias(asistencias)\r\n                    progressC.visibility = View.GONE\r\n                }else{ Toast.makeText(view.context, msg, Toast.LENGTH_SHORT).show() }\r\n            }\r\n            override fun onFailure(call: Call<List<Asistencia>>, t: Throwable) {\r\n                msg = \"Error en la API: ${t.message}\"\r\n                Toast.makeText(view.context, msg, Toast.LENGTH_SHORT).show()\r\n                Log.e(\"OBTENER ASISTENCIAS\", t.message.toString())\r\n            }\r\n        } )\r\n\r\n        btnRegistrar.setOnClickListener {\r\n            if (asistencias.isNotEmpty()){\r\n//                asistencias.map { a->a.estudianteId = a.estudianteId.split(\"-\")[1] }\r\n                api.editarAsistencias(asistencias).enqueue(object : Callback<List<String>> {\r\n                    override fun onResponse(call: Call<List<String>>, response: Response<List<String>>) {\r\n                        msg = response.headers()[\"message\"] ?: \"\"\r\n                        if (response.isSuccessful) {\r\n                            val emails = response.body()!!\r\n                            NotificacionesJMA.notificarFalta(viewLifecycleOwner, emails, \"Matemática\", activity)\r\n                        }else{\r\n                            Toast.makeText(view.context, msg, Toast.LENGTH_SHORT).show()\r\n                        }\r\n                    }\r\n                    override fun onFailure(call: Call<List<String>>, t: Throwable) {\r\n                        msg = \"Error en la API: ${t.message}\"\r\n                        Toast.makeText(view.context, msg, Toast.LENGTH_SHORT).show()\r\n                        Log.e(\"EDITAR ASISTENCIAS\", t.message.toString())\r\n                    }\r\n                } )\r\n            }\r\n        }\r\n    }\r\n    companion object {\r\n        @JvmStatic\r\n        fun newInstance(token: String, estudiantes: Serializable, docenteId: String, cursoId: String) =\r\n            RegistroAsistenciaFragment().apply {\r\n                arguments = Bundle().apply {\r\n                    putSerializable(MenuAdministradorActivity().TOKEN, token)\r\n                    putSerializable(MenuAdministradorActivity().USUARIOID, docenteId)\r\n                    putSerializable(MenuDocenteActivity().CURSOID, cursoId)\r\n                    putSerializable(MenuDocenteActivity().ESTUDIANTES, estudiantes)\r\n                }\r\n            }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/javierprado/jmapp/view/fragments/RegistroAsistenciaFragment.kt b/app/src/main/java/com/javierprado/jmapp/view/fragments/RegistroAsistenciaFragment.kt
--- a/app/src/main/java/com/javierprado/jmapp/view/fragments/RegistroAsistenciaFragment.kt	(revision c1aa4bdc4442c527da4d4676528490a2d372f19b)
+++ b/app/src/main/java/com/javierprado/jmapp/view/fragments/RegistroAsistenciaFragment.kt	(date 1713157698715)
@@ -106,7 +106,7 @@
 
         btnRegistrar.setOnClickListener {
             if (asistencias.isNotEmpty()){
-//                asistencias.map { a->a.estudianteId = a.estudianteId.split("-")[1] }
+                asistencias.map { a->a.estudianteId = a.estudianteId.split("-")[1] }
                 api.editarAsistencias(asistencias).enqueue(object : Callback<List<String>> {
                     override fun onResponse(call: Call<List<String>>, response: Response<List<String>>) {
                         msg = response.headers()["message"] ?: ""
Index: app/src/main/java/com/javierprado/jmapp/view/activities/notificaciones/RegistroDeNotificacionActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/javierprado/jmapp/view/activities/notificaciones/RegistroDeNotificacionActivity.kt b/app/src/main/java/com/javierprado/jmapp/view/activities/notificaciones/RegistroDeNotificacionActivity.kt
new file mode 100644
--- /dev/null	(date 1713157322381)
+++ b/app/src/main/java/com/javierprado/jmapp/view/activities/notificaciones/RegistroDeNotificacionActivity.kt	(date 1713157322381)
@@ -0,0 +1,20 @@
+package com.javierprado.jmapp.view.activities.notificaciones
+
+import android.os.Bundle
+import android.view.View
+import androidx.appcompat.app.AppCompatActivity
+import com.google.android.material.progressindicator.CircularProgressIndicator
+import com.javierprado.jmapp.R
+import com.javierprado.jmapp.view.fragments.RegistroDeNotificacionFragment
+
+class RegistroDeNotificacionActivity : AppCompatActivity() {
+    override fun onCreate(savedInstanceState: Bundle?) {
+        super.onCreate(savedInstanceState)
+        setContentView(R.layout.activity_registro_de_notificacion)
+
+        supportFragmentManager.beginTransaction()
+            .replace(R.id.fcv_rnotificaciones_main, RegistroDeNotificacionFragment())
+            .commit()
+
+    }
+}
\ No newline at end of file
Index: app/src/main/java/com/javierprado/jmapp/view/fragments/RegistroDeNotificacionFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/javierprado/jmapp/view/fragments/RegistroDeNotificacionFragment.kt b/app/src/main/java/com/javierprado/jmapp/view/fragments/RegistroDeNotificacionFragment.kt
new file mode 100644
--- /dev/null	(date 1713157356583)
+++ b/app/src/main/java/com/javierprado/jmapp/view/fragments/RegistroDeNotificacionFragment.kt	(date 1713157356583)
@@ -0,0 +1,149 @@
+package com.javierprado.jmapp.view.fragments
+
+import android.os.Bundle
+import android.text.Editable
+import android.text.TextWatcher
+import android.view.LayoutInflater
+import android.view.View
+import android.view.ViewGroup
+import android.widget.ArrayAdapter
+import android.widget.AutoCompleteTextView
+import android.widget.Button
+import android.widget.EditText
+import android.widget.Toast
+import androidx.fragment.app.Fragment
+import com.google.firebase.firestore.FirebaseFirestore
+import com.javierprado.jmapp.R
+
+class RegistroDeNotificacionFragment : Fragment() {
+
+    private lateinit var botonEnviar: Button
+    private lateinit var tituloEditText: EditText
+    private lateinit var descripcionEditText: EditText
+    private lateinit var autoCompleteTextView: AutoCompleteTextView
+
+    private var destinatarioSeleccionado: String = ""
+    private var titulo: String = ""
+    private var descripcion: String = ""
+
+    override fun onCreateView(
+        inflater: LayoutInflater,
+        container: ViewGroup?,
+        savedInstanceState: Bundle?
+    ): View? {
+
+        val view = inflater.inflate(R.layout.fragment_registro_de_noticiaciones, container, false)
+
+        autoCompleteTextView = view.findViewById(R.id.autoCompleteTextView)
+        botonEnviar = view.findViewById(R.id.fg_btn_funcion)
+        tituloEditText = view.findViewById(R.id.txt_NotiTitulo)
+        descripcionEditText = view.findViewById(R.id.txt_NotiDescrip)
+
+        // Agregar TextWatchers a los EditText
+        tituloEditText.addTextChangedListener(textWatcher)
+        descripcionEditText.addTextChangedListener(textWatcher)
+
+        // Deshabilitar el botón al inicio
+        botonEnviar.isEnabled = false
+
+        return view
+    }
+
+    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
+        super.onViewCreated(view, savedInstanceState)
+
+        // Configurar el adaptador para el AutoCompleteTextView
+        val adapter = ArrayAdapter<String>(requireContext(), android.R.layout.simple_dropdown_item_1line)
+        autoCompleteTextView.setAdapter(adapter)
+
+        // Manejar el evento de cambio de texto en el AutoCompleteTextView
+        autoCompleteTextView.addTextChangedListener(object : TextWatcher {
+            override fun afterTextChanged(s: Editable?) {
+                val nombreCompleto = s.toString()
+                if (nombreCompleto.isNotBlank()) {
+                    val nombres = nombreCompleto.split(" ")
+                    if (nombres.size >= 2) {
+                        val nombre = nombres[0]
+                        val apellido = nombres[1]
+                        buscarUsuarios(nombre, apellido)
+                    }
+                } else {
+                    // Limpiar la lista de sugerencias si el campo está vacío
+                    adapter.clear()
+                }
+            }
+
+            override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {}
+
+            override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {}
+        })
+
+        // Agregar un listener para manejar la selección de usuario en el AutoCompleteTextView
+        autoCompleteTextView.setOnItemClickListener { parent, _, position, _ ->
+            destinatarioSeleccionado = parent.getItemAtPosition(position) as String
+        }
+
+        // lógica del botón
+        botonEnviar.setOnClickListener {
+            titulo = tituloEditText.text.toString()
+            descripcion = descripcionEditText.text.toString()
+
+            // Verificar si los campos están completos
+            if (titulo.isNotEmpty() && descripcion.isNotEmpty() && destinatarioSeleccionado.isNotEmpty()) {
+                // Enviar Noti
+                enviarNotificacion(destinatarioSeleccionado, titulo, descripcion)
+            } else {
+                // Mostrar mensaje de error si falta algún campo
+                Toast.makeText(requireContext(), "Por favor completa todos los campos", Toast.LENGTH_SHORT).show()
+            }
+        }
+    }
+
+    private fun buscarUsuarios(nombre: String, apellido: String) {
+        val db = FirebaseFirestore.getInstance()
+        val usuariosRef = db.collection("usuarios")
+
+        // Realizar la consulta en Firestore
+        usuariosRef.whereEqualTo("nombres", nombre)
+            .whereEqualTo("apellidos", apellido)
+            .get()
+            .addOnSuccessListener { result ->
+                val usuarios = mutableListOf<String>()
+                for (document in result) {
+                    val nombreCompleto = "${document.getString("nombres")} ${document.getString("apellidos")}"
+                    usuarios.add(nombreCompleto)
+                }
+                // Actualizar el adaptador con los resultados de la búsqueda
+                val adapter = ArrayAdapter(requireContext(), android.R.layout.simple_dropdown_item_1line, usuarios)
+                autoCompleteTextView.setAdapter(adapter)
+            }
+            .addOnFailureListener { exception ->
+                // Manejar errores
+            }
+    }
+
+    private fun enviarNotificacion(destinatario: String, titulo: String, descripcion: String) {
+        // Aquí iría la lógica para enviar la notificación
+        // Mostrar mensaje de envío correcto
+        Toast.makeText(requireContext(), "Notificación enviada correctamente", Toast.LENGTH_SHORT).show()
+
+        // Regresar a la actividad anterior
+        requireActivity().finish()
+    }
+
+    private val textWatcher = object : TextWatcher {
+        override fun afterTextChanged(s: Editable?) {
+            // Verificar si todos los campos están llenos para habilitar el botón
+            val titulo = tituloEditText.text.toString().trim()
+            val descripcion = descripcionEditText.text.toString().trim()
+            botonEnviar.isEnabled =
+                titulo.isNotEmpty() && descripcion.isNotEmpty() && destinatarioSeleccionado.isNotEmpty()
+        }
+
+        override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {
+        }
+
+        override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {
+        }
+    }
+}
Index: .idea/gradle.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleMigrationSettings\" migrationVersion=\"1\" />\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"#JAVA_HOME\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n        <option name=\"resolveExternalAnnotations\" value=\"false\" />\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/gradle.xml b/.idea/gradle.xml
--- a/.idea/gradle.xml	(revision c1aa4bdc4442c527da4d4676528490a2d372f19b)
+++ b/.idea/gradle.xml	(date 1713157322291)
@@ -5,7 +5,7 @@
     <option name="linkedExternalProjectsSettings">
       <GradleProjectSettings>
         <option name="externalProjectPath" value="$PROJECT_DIR$" />
-        <option name="gradleJvm" value="#JAVA_HOME" />
+        <option name="gradleJvm" value="jbr-17" />
         <option name="modules">
           <set>
             <option value="$PROJECT_DIR$" />
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ExternalStorageConfigurationManager\" enabled=\"true\" />\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_17\" default=\"true\" project-jdk-name=\"corretto-17\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n  <component name=\"SuppressKotlinCodeStyleNotification\">\r\n    <option name=\"disableForAll\" value=\"true\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
--- a/.idea/misc.xml	(revision c1aa4bdc4442c527da4d4676528490a2d372f19b)
+++ b/.idea/misc.xml	(date 1713157322306)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <project version="4">
   <component name="ExternalStorageConfigurationManager" enabled="true" />
-  <component name="ProjectRootManager" version="2" languageLevel="JDK_17" default="true" project-jdk-name="corretto-17" project-jdk-type="JavaSDK">
+  <component name="ProjectRootManager" version="2" languageLevel="JDK_17" default="true" project-jdk-name="jbr-17" project-jdk-type="JavaSDK">
     <output url="file://$PROJECT_DIR$/build/classes" />
   </component>
   <component name="ProjectType">
Index: app/src/main/java/com/javierprado/jmapp/view/fragments/SeleccionarUsuarioFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>@file:Suppress(\"DEPRECATION\")\r\n\r\npackage com.javierprado.jmapp.view.fragments\r\n\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport androidx.fragment.app.Fragment\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.Toast\r\nimport androidx.appcompat.widget.Toolbar\r\nimport androidx.databinding.DataBindingUtil\r\nimport androidx.lifecycle.Observer\r\nimport androidx.lifecycle.ViewModelProvider\r\nimport androidx.navigation.findNavController\r\nimport androidx.recyclerview.widget.LinearLayoutManager\r\nimport androidx.recyclerview.widget.RecyclerView\r\nimport com.javierprado.jmapp.R\r\nimport com.javierprado.jmapp.data.util.AnotherUtil\r\nimport com.javierprado.jmapp.view.adapters.*\r\nimport com.javierprado.jmapp.modal.RecentChats\r\nimport com.javierprado.jmapp.modal.Users\r\nimport com.javierprado.jmapp.mvvm.ChatAppViewModel\r\nimport com.google.firebase.auth.FirebaseAuth\r\nimport com.google.firebase.firestore.FirebaseFirestore\r\nimport com.javierprado.jmapp.data.entities.Aula\r\nimport com.javierprado.jmapp.data.entities.Docente\r\nimport com.javierprado.jmapp.data.entities.Estudiante\r\nimport com.javierprado.jmapp.data.retrofit.RetrofitHelper\r\nimport com.javierprado.jmapp.data.util.RoleType\r\nimport com.javierprado.jmapp.databinding.FragmentSeleccionarUsuarioBinding\r\nimport com.javierprado.jmapp.view.clicks.AulaClick\r\nimport de.hdodenhof.circleimageview.CircleImageView\r\nimport retrofit2.Call\r\nimport retrofit2.Callback\r\nimport retrofit2.Response\r\n\r\nprivate const val CHANNEL_ID = \"my_channel\"\r\nclass SeleccionarUsuarioFragment : Fragment(), OnItemClickListener, onChatClicked {\r\n    lateinit var rvUsers : RecyclerView\r\n    lateinit var rvSeleccionarUsuarios : RecyclerView\r\n    lateinit var rvRecentChats : RecyclerView\r\n    lateinit var adapter : UserAdapter\r\n    lateinit var aulaAdapter : AulaAdapter\r\n    lateinit var hijoAdapter : HijoApoderadoAdapter\r\n    lateinit var viewModel : ChatAppViewModel\r\n    lateinit var toolbar: Toolbar\r\n    lateinit var circleImageView: CircleImageView\r\n    lateinit var recentadapter : RecentChatAdapter\r\n    lateinit var auth: FirebaseAuth\r\n    lateinit var firestore : FirebaseFirestore\r\n    lateinit var binding: FragmentSeleccionarUsuarioBinding\r\n\r\n    private lateinit var msg : String\r\n//    var aulas: List<Aula> = ArrayList()\r\n//    var estudiantes: List<Estudiante> = ArrayList()\r\n\r\n    private var token = \"\"\r\n    var usuarioId: String = \"\"\r\n    private val retro = RetrofitHelper.getInstanceStatic()\r\n    override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View {\r\n        // Inflate the layout for this fragment\r\n        binding = DataBindingUtil.inflate(inflater, R.layout.fragment_seleccionar_usuario, container, false)\r\n        return binding.root\r\n    }\r\n\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n\r\n        viewModel = ViewModelProvider(this).get(ChatAppViewModel::class.java)\r\n        toolbar = view.findViewById(R.id.toolbarMain)\r\n//        val logoutimage = toolbar.findViewById<ImageView>(R.id.logOut)\r\n//        circleImageView = toolbar.findViewById(R.id.tlImage)\r\n        binding.lifecycleOwner = viewLifecycleOwner\r\n//        viewModel.imageUrl.observe(viewLifecycleOwner, Observer {\r\n//            Glide.with(requireContext()).load(it).into(circleImageView)\r\n//        })\r\n//        requireActivity().onBackPressedDispatcher.addCallback(viewLifecycleOwner,\r\n//            object : OnBackPressedCallback(true) {\r\n//                override fun handleOnBackPressed() {\r\n//                    getActivity()?.moveTaskToBack(true);\r\n//                    getActivity()?.finish();\r\n//                }\r\n//            })\r\n        auth = FirebaseAuth.getInstance()\r\n        firestore = FirebaseFirestore.getInstance()\r\n\r\n        rvUsers = view.findViewById(R.id.rvUsers)\r\n        rvSeleccionarUsuarios = view.findViewById(R.id.rvSeleccionarUsuarios)\r\n        rvRecentChats = view.findViewById(R.id.rvRecentChats)\r\n        adapter = UserAdapter()\r\n        recentadapter = RecentChatAdapter()\r\n        hijoAdapter = HijoApoderadoAdapter()\r\n\r\n        val layoutManager = LinearLayoutManager(activity, LinearLayoutManager.HORIZONTAL, false)\r\n        val layoutManager2 = LinearLayoutManager(activity, LinearLayoutManager.HORIZONTAL, false)\r\n        val layoutManager3 = LinearLayoutManager(activity)\r\n\r\n        rvUsers.layoutManager = layoutManager\r\n        rvSeleccionarUsuarios.layoutManager = layoutManager2\r\n        rvRecentChats.layoutManager= layoutManager3\r\n\r\n        val api = retro.getApi()\r\n        aulaAdapter = AulaAdapter(ArrayList(), object : AulaClick {\r\n            override fun onAulaClicker(aula: Aula?) {\r\n                val emailsApoderados = aula!!.emails\r\n                if(emailsApoderados.isNotEmpty()){\r\n                    viewModel.getUsers(emailsApoderados).observe(viewLifecycleOwner) {\r\n                        adapter.setList(it)\r\n                        rvUsers.adapter = adapter\r\n                        rvSeleccionarUsuarios.visibility = View.GONE\r\n                        rvUsers.visibility = View.VISIBLE\r\n                    }\r\n                }else{\r\n                    Toast.makeText(activity, \"No hay docentes.\", Toast.LENGTH_SHORT).show()\r\n                }\r\n            }\r\n        })\r\n        hijoAdapter = HijoApoderadoAdapter(ArrayList(), object : onEstudianteApoClickListener {\r\n            override fun onHijoSelected(hijo: Estudiante) {\r\n                api.listarDocentes(\"null\", hijo.id, \"null\").enqueue(object : Callback<List<Docente>> {\r\n                    override fun onResponse(call: Call<List<Docente>>, response: Response<List<Docente>>) {\r\n                        msg = response.headers()[\"message\"] ?: \"\"\r\n                        if (response.isSuccessful) {\r\n                            val emailsDocentes = response.body()!!.map { d-> d.correo }\r\n                            viewModel.getUsers(emailsDocentes).observe(viewLifecycleOwner) {\r\n                                adapter.setList(it)\r\n                                rvUsers.adapter = adapter\r\n                                rvSeleccionarUsuarios.visibility = View.GONE\r\n                                rvUsers.visibility = View.VISIBLE\r\n                            }\r\n                        }else{\r\n                            Log.e(\"NR:\", msg)\r\n                            Toast.makeText(activity, msg, Toast.LENGTH_SHORT).show()\r\n                        }\r\n                    }\r\n                    override fun onFailure(call: Call<List<Docente>>, t: Throwable) {\r\n                        Log.e(\"OBTENER DOCENTES\", t.message.toString())\r\n                    }\r\n                } )\r\n            }\r\n        })\r\n        firestore.collection(\"Users\").document(AnotherUtil.getUidLoggedIn()).addSnapshotListener{ value, error ->\r\n            if (value != null && value.exists()) {\r\n                val user = value.toObject(Users::class.java)\r\n                usuarioId = user!!.tipoid!!\r\n                token = user.token!!\r\n                retro.setBearerToken(token)\r\n                if(user.tipo!! == RoleType.DOC.name){\r\n                    rvSeleccionarUsuarios.adapter = aulaAdapter\r\n                    api.listarAulas(usuarioId, null, null, null).enqueue(object : Callback<List<Aula>> {\r\n                        override fun onResponse(call: Call<List<Aula>>, response: Response<List<Aula>>) {\r\n                            msg = response.headers()[\"message\"] ?: \"\"\r\n                            if (response.isSuccessful) {\r\n                                aulaAdapter.setAulas(response.body()!!)\r\n                            }else{\r\n                                Log.e(\"OBTENER AULAS:\", msg)\r\n                                Toast.makeText(activity, msg, Toast.LENGTH_SHORT).show()\r\n                            }\r\n                        }\r\n                        override fun onFailure(call: Call<List<Aula>>, t: Throwable) {\r\n                            msg = \"Error en la API: ${t.message}\"\r\n                            Toast.makeText(activity, msg, Toast.LENGTH_SHORT).show()\r\n                            Log.e(\"OBTENER AULAS\", t.message.toString())\r\n                        }\r\n                    } )\r\n                }else{\r\n                    rvSeleccionarUsuarios.adapter = hijoAdapter\r\n                    api.listarEstudiantes(usuarioId, ArrayList()).enqueue(object : Callback<List<Estudiante>> {\r\n                        override fun onResponse(call: Call<List<Estudiante>>, response: Response<List<Estudiante>>) {\r\n                            msg = response.headers()[\"message\"] ?: \"\"\r\n                            if (response.isSuccessful) {\r\n                                hijoAdapter.setEstudiantes(response.body()!!)\r\n                            }else{\r\n                                msg = \"FAIL $msg\"\r\n                                Log.e(\"NR :\", msg)\r\n                            }\r\n                        }\r\n                        override fun onFailure(call: Call<List<Estudiante>>, t: Throwable) {\r\n                            Log.e(\"OBTENER APODERADOS\", t.message.toString())\r\n                        }\r\n                    } )\r\n                }\r\n            }\r\n        }\r\n        adapter.setOnClickListener(this)\r\n        viewModel.getRecentUsers().observe(viewLifecycleOwner, Observer {\r\n            rvRecentChats.adapter = recentadapter\r\n            recentadapter.setList(it)\r\n        })\r\n        recentadapter.setOnChatClickListener(this)\r\n\r\n//        circleImageView.setOnClickListener {\r\n//            view.findNavController().navigate(R.id.action_homeFragment_to_settingFragment)\r\n//        }\r\n\r\n    }\r\n    //?\r\n    @Deprecated(\"Deprecated in Java\", ReplaceWith(\r\n        \"super.onActivityCreated(savedInstanceState)\",\r\n        \"androidx.fragment.app.Fragment\"\r\n    ))\r\n    override fun onActivityCreated(savedInstanceState: Bundle?) {\r\n        super.onActivityCreated(savedInstanceState)\r\n    }\r\n    override fun onUserSelected(position: Int, users: Users) {\r\n        val action = SeleccionarUsuarioFragmentDirections.actionSeleccionarUsuarioFragmentToChatFragment(users)\r\n        view?.findNavController()?.navigate(action)\r\n    }\r\n    override fun getOnChatCLickedItem(position: Int, chatList: RecentChats) {\r\n        val action = SeleccionarUsuarioFragmentDirections.actionSeleccionarUsuarioFragmentToChatfromHome(chatList)\r\n        view?.findNavController()?.navigate(action)\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/javierprado/jmapp/view/fragments/SeleccionarUsuarioFragment.kt b/app/src/main/java/com/javierprado/jmapp/view/fragments/SeleccionarUsuarioFragment.kt
--- a/app/src/main/java/com/javierprado/jmapp/view/fragments/SeleccionarUsuarioFragment.kt	(revision c1aa4bdc4442c527da4d4676528490a2d372f19b)
+++ b/app/src/main/java/com/javierprado/jmapp/view/fragments/SeleccionarUsuarioFragment.kt	(date 1713157322324)
@@ -24,6 +24,7 @@
 import com.javierprado.jmapp.mvvm.ChatAppViewModel
 import com.google.firebase.auth.FirebaseAuth
 import com.google.firebase.firestore.FirebaseFirestore
+import com.javierprado.jmapp.data.entities.Apoderado
 import com.javierprado.jmapp.data.entities.Aula
 import com.javierprado.jmapp.data.entities.Docente
 import com.javierprado.jmapp.data.entities.Estudiante
@@ -36,7 +37,6 @@
 import retrofit2.Callback
 import retrofit2.Response
 
-private const val CHANNEL_ID = "my_channel"
 class SeleccionarUsuarioFragment : Fragment(), OnItemClickListener, onChatClicked {
     lateinit var rvUsers : RecyclerView
     lateinit var rvSeleccionarUsuarios : RecyclerView
@@ -53,8 +53,7 @@
     lateinit var binding: FragmentSeleccionarUsuarioBinding
 
     private lateinit var msg : String
-//    var aulas: List<Aula> = ArrayList()
-//    var estudiantes: List<Estudiante> = ArrayList()
+    var aulas: Collection<Aula> = ArrayList()
 
     private var token = ""
     var usuarioId: String = ""
@@ -153,7 +152,8 @@
                         override fun onResponse(call: Call<List<Aula>>, response: Response<List<Aula>>) {
                             msg = response.headers()["message"] ?: ""
                             if (response.isSuccessful) {
-                                aulaAdapter.setAulas(response.body()!!)
+                                aulas = response.body()!!
+                                aulaAdapter.setAulas(aulas as MutableList)
                             }else{
                                 Log.e("OBTENER AULAS:", msg)
                                 Toast.makeText(activity, msg, Toast.LENGTH_SHORT).show()
@@ -169,9 +169,9 @@
                     rvSeleccionarUsuarios.adapter = hijoAdapter
                     api.listarEstudiantes(usuarioId, ArrayList()).enqueue(object : Callback<List<Estudiante>> {
                         override fun onResponse(call: Call<List<Estudiante>>, response: Response<List<Estudiante>>) {
-                            msg = response.headers()["message"] ?: ""
                             if (response.isSuccessful) {
-                                hijoAdapter.setEstudiantes(response.body()!!)
+                                val estudiantes = response.body()!!
+                                hijoAdapter.setEstudiantes(estudiantes)
                             }else{
                                 msg = "FAIL $msg"
                                 Log.e("NR :", msg)
@@ -186,8 +186,8 @@
         }
         adapter.setOnClickListener(this)
         viewModel.getRecentUsers().observe(viewLifecycleOwner, Observer {
+            recentadapter.setList(it)
             rvRecentChats.adapter = recentadapter
-            recentadapter.setList(it)
         })
         recentadapter.setOnChatClickListener(this)
 
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\">\r\n\r\n    <uses-permission android:name=\"android.permission.POST_NOTIFICATIONS\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"android.permission.KILL_BACKGROUND_PROCESSES\" />\r\n    <uses-permission android:name=\"android.permission.WAKE_LOCK\" />\r\n    <uses-permission android:name=\"com.google.android.c2dm.permission.RECEIVE\" />\r\n    <uses-permission\r\n        android:name=\"android.permission.READ_EXTERNAL_STORAGE\"\r\n        android:maxSdkVersion=\"32\" />\r\n\r\n    <application\r\n        android:name=\".view.activities.MyApplication\"\r\n        android:allowBackup=\"true\"\r\n        android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n        android:fullBackupContent=\"@xml/backup_rules\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/Theme.JMAPP\"\r\n        android:usesCleartextTraffic=\"true\"\r\n        tools:targetApi=\"31\">\r\n        <activity\r\n            android:name=\".view.activities.control.ControlEstudianteActivity\"\r\n            android:exported=\"false\" />\r\n        <activity\r\n            android:name=\".view.activities.comunicacion.ChatApoderadoDocenteActivity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.activities.comunicacion.ChatDocenteApoderadoActivity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.activities.control.ControlSeleccionActivity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.activities.editar.ActualizarInfoApoderadoActivity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.activities.control.ControlHorarioActivity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.activities.control.ControlNoticiaActivity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.activities.agregar.RegisterDocenteActivity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.activities.agregar.RegisterApoderadoActivity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.activity_noticias\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.login.LoginAdmin\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.login.LoginDocente\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.login.LoginActivity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.activities.menus.MenuAdministradorActivity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.NotiEventosEsco\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.activities.menus.MenuDocenteActivity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.activities.menus.MenuApoderadoActivity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.Seleccion_Sesion_Activity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.MensajeDocente\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.login.OptionLogin\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.activities.editar.ResetPasswordActivity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.MenuPrincipalApoderadoActivity\"\r\n            android:exported=\"true\" />\r\n        <activity\r\n            android:name=\".view.MainActivity\"\r\n            android:exported=\"true\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n\r\n        <service\r\n            android:name=\".notificaciones.FirebaseService\"\r\n            android:enabled=\"true\"\r\n            android:exported=\"false\"\r\n            android:permission=\"com.google.android.c2dm.permission.SEND\">\r\n            <intent-filter>\r\n                <action android:name=\"com.google.firebase.MESSAGING_EVENT\" />\r\n                <action android:name=\"com.google.android.c2dm.intent.RECEIVE\" />\r\n            </intent-filter>\r\n        </service>\r\n        <receiver android:name=\".notificaciones.NotificationReply\" />\r\n        <receiver android:name=\".notificaciones.NotificationReunion\" />\r\n    </application>\r\n\r\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
--- a/app/src/main/AndroidManifest.xml	(revision c1aa4bdc4442c527da4d4676528490a2d372f19b)
+++ b/app/src/main/AndroidManifest.xml	(date 1713157356609)
@@ -23,6 +23,8 @@
         android:theme="@style/Theme.JMAPP"
         android:usesCleartextTraffic="true"
         tools:targetApi="31">
+        <activity android:name=".view.activities.notificaciones.RegistroDeNotificacionActivity"
+            android:exported="true"/>
         <activity
             android:name=".view.activities.control.ControlEstudianteActivity"
             android:exported="false" />
Index: app/src/main/java/com/javierprado/jmapp/view/activities/menus/MenuAdministradorActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.javierprado.jmapp.view.activities.menus\r\n\r\nimport android.content.Intent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.view.Menu\r\nimport android.view.MenuItem\r\nimport android.widget.ImageView\r\nimport android.widget.Toast\r\nimport androidx.appcompat.app.ActionBarDrawerToggle\r\nimport androidx.core.view.GravityCompat\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.recyclerview.widget.LinearLayoutManager\r\nimport androidx.recyclerview.widget.RecyclerView\r\nimport com.google.android.material.navigation.NavigationView\r\nimport com.google.firebase.auth.FirebaseAuth\r\nimport com.javierprado.jmapp.R\r\nimport com.javierprado.jmapp.view.adapters.NoticiaAdapter\r\nimport com.javierprado.jmapp.data.retrofit.ColegioAPI\r\nimport com.javierprado.jmapp.data.retrofit.RetrofitHelper\r\nimport com.javierprado.jmapp.data.util.ExtraFunctions\r\nimport com.javierprado.jmapp.data.util.RoleType\r\nimport com.javierprado.jmapp.view.NotiEventosEsco\r\nimport com.javierprado.jmapp.view.activities.agregar.RegisterApoderadoActivity\r\nimport com.javierprado.jmapp.view.activities.agregar.RegisterDocenteActivity\r\nimport com.javierprado.jmapp.view.activities.control.ControlHorarioActivity\r\nimport com.javierprado.jmapp.view.activities.control.ControlNoticiaActivity\r\nimport com.javierprado.jmapp.view.login.OptionLogin\r\n\r\nclass MenuAdministradorActivity : AppCompatActivity(), NavigationView.OnNavigationItemSelectedListener {\r\n\r\n    private lateinit var drawer: DrawerLayout\r\n    private lateinit var toogle: ActionBarDrawerToggle\r\n\r\n    private lateinit var recyclerView: RecyclerView\r\n    private lateinit var btnMasRecientes: ImageView\r\n\r\n    private lateinit var auth: FirebaseAuth\r\n    private lateinit var api : ColegioAPI\r\n\r\n    val TOKEN = \"token\"; val USUARIOID = \"usuarioid\"\r\n    var tokenAdmin = \"\"; var adminId = \"\"\r\n\r\n    private var extraFuns : ExtraFunctions = ExtraFunctions()\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_menu_administrador)\r\n\r\n        btnMasRecientes = findViewById(R.id.btn_mas_reciente)\r\n        //API Y BUNDLE\r\n        val retro = RetrofitHelper.getInstanceStatic()\r\n        val bundle = intent.extras\r\n        if (bundle != null) {\r\n            tokenAdmin=bundle.getString(TOKEN, \"\")\r\n            adminId=bundle.getString(USUARIOID, \"\")\r\n            retro.setBearerToken(tokenAdmin)\r\n        }\r\n        api = retro.getApi()\r\n        //Noticias\r\n        recyclerView = findViewById(R.id.recyclerViewNews)\r\n        recyclerView.layoutManager = LinearLayoutManager(this)\r\n\r\n        actualizarNoticias(retro.getBearerToken())\r\n        btnMasRecientes.setOnClickListener { actualizarNoticias(retro.getBearerToken()) }\r\n\r\n        auth = FirebaseAuth.getInstance()\r\n\r\n\r\n        val toolbar: androidx.appcompat.widget.Toolbar = findViewById(R.id.toolbar_main)\r\n        setSupportActionBar(toolbar)\r\n\r\n        drawer = findViewById(R.id.drawer_layout)\r\n\r\n        toogle = ActionBarDrawerToggle(this, drawer, toolbar, R.string.navigation_drawer_open, R.string.navigation_drawer_close)\r\n\r\n        drawer.addDrawerListener(toogle)\r\n\r\n        supportActionBar?.setDisplayHomeAsUpEnabled(true)\r\n        supportActionBar?.setHomeButtonEnabled(true)\r\n\r\n        val navigationView: NavigationView = findViewById(R.id.nav_view_administrador)\r\n        navigationView.setNavigationItemSelectedListener(this)\r\n    }\r\n\r\n    override fun onNavigationItemSelected(item: MenuItem): Boolean {\r\n        when(item.itemId){\r\n            R.id.nav_item_1 -> Toast.makeText(this, \"Inicio\", Toast.LENGTH_SHORT).show()\r\n            R.id.nav_item_2 -> {\r\n                val intent = Intent(this, RegisterApoderadoActivity::class.java)\r\n                intent.putExtra(USUARIOID, adminId)\r\n                intent.putExtra(RegisterApoderadoActivity().TOKEN, tokenAdmin)\r\n                startActivity(intent)\r\n            }\r\n            R.id.nav_item_3 -> {\r\n                val intent = Intent(this, RegisterDocenteActivity::class.java)\r\n                intent.putExtra(USUARIOID, adminId)\r\n                intent.putExtra(RegisterDocenteActivity().TOKEN, tokenAdmin)\r\n                startActivity(intent)\r\n            }\r\n            R.id.nav_item_4 -> {\r\n                Toast.makeText(this, \"Redactar y Enviar Notificaciones\", Toast.LENGTH_SHORT).show()\r\n                val intent = Intent(this, NotiEventosEsco::class.java)\r\n                intent.putExtra(USUARIOID, adminId)\r\n                startActivity(intent)\r\n            }\r\n            R.id.nav_item_5 -> {\r\n                Toast.makeText(this, \"Editar Horario Escolar\", Toast.LENGTH_SHORT).show()\r\n                val intent = Intent(this, ControlHorarioActivity::class.java)\r\n                intent.putExtra(MenuAdministradorActivity().USUARIOID, adminId)\r\n                intent.putExtra(MenuAdministradorActivity().TOKEN, tokenAdmin)\r\n                intent.putExtra(ControlHorarioActivity().ROLE, RoleType.ADMIN.name)\r\n                startActivity(intent)\r\n            }\r\n            R.id.nav_item_6 -> {\r\n                val intent = Intent(this, ControlNoticiaActivity::class.java)\r\n                intent.putExtra(USUARIOID, adminId)\r\n                intent.putExtra(MenuAdministradorActivity().TOKEN, tokenAdmin)\r\n                startActivity(intent)\r\n                Toast.makeText(this, \"Agregar Noticia\", Toast.LENGTH_SHORT).show()\r\n            }\r\n            R.id.nav_item_7 -> Toast.makeText(this, \"Docentes Registrados\", Toast.LENGTH_SHORT).show()\r\n            R.id.nav_item_8 ->  {\r\n                auth.signOut()\r\n                val intent = Intent(this, OptionLogin::class.java)\r\n                intent.flags = Intent.FLAG_ACTIVITY_CLEAR_TOP or Intent.FLAG_ACTIVITY_SINGLE_TOP\r\n                startActivity(intent)\r\n            }\r\n        }\r\n\r\n        drawer.closeDrawer(GravityCompat.START)\r\n        return true\r\n    }\r\n\r\n    //Iconos del Toolbar\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        menuInflater.inflate(R.menu.perfil_noti_main, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\r\n        return when (item.itemId) {\r\n            R.id.action_perfil -> {\r\n\r\n                true\r\n            }\r\n            R.id.action_notificaciones -> {\r\n\r\n                true\r\n            }\r\n            else -> super.onOptionsItemSelected(item)\r\n        }\r\n    }\r\n    fun actualizarNoticias(token: String){\r\n        val adapter = NoticiaAdapter(this@MenuAdministradorActivity, ArrayList(), api, token, false)\r\n        adapter.setAdminId(adminId)\r\n        extraFuns.listarNoticias(api, adapter, this@MenuAdministradorActivity)\r\n        recyclerView.adapter = adapter\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/javierprado/jmapp/view/activities/menus/MenuAdministradorActivity.kt b/app/src/main/java/com/javierprado/jmapp/view/activities/menus/MenuAdministradorActivity.kt
--- a/app/src/main/java/com/javierprado/jmapp/view/activities/menus/MenuAdministradorActivity.kt	(revision c1aa4bdc4442c527da4d4676528490a2d372f19b)
+++ b/app/src/main/java/com/javierprado/jmapp/view/activities/menus/MenuAdministradorActivity.kt	(date 1713157327929)
@@ -26,6 +26,8 @@
 import com.javierprado.jmapp.view.activities.agregar.RegisterDocenteActivity
 import com.javierprado.jmapp.view.activities.control.ControlHorarioActivity
 import com.javierprado.jmapp.view.activities.control.ControlNoticiaActivity
+import com.javierprado.jmapp.view.activities.notificaciones.RegistroDeNotificacionActivity
+import com.javierprado.jmapp.view.fragments.RegistroDeNotificacionFragment
 import com.javierprado.jmapp.view.login.OptionLogin
 
 class MenuAdministradorActivity : AppCompatActivity(), NavigationView.OnNavigationItemSelectedListener {
@@ -100,7 +102,7 @@
             }
             R.id.nav_item_4 -> {
                 Toast.makeText(this, "Redactar y Enviar Notificaciones", Toast.LENGTH_SHORT).show()
-                val intent = Intent(this, NotiEventosEsco::class.java)
+                val intent = Intent(this, RegistroDeNotificacionActivity::class.java)
                 intent.putExtra(USUARIOID, adminId)
                 startActivity(intent)
             }
Index: app/src/main/res/layout/activity_registro_de_notificacion.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_registro_de_notificacion.xml b/app/src/main/res/layout/activity_registro_de_notificacion.xml
new file mode 100644
--- /dev/null	(date 1713157356592)
+++ b/app/src/main/res/layout/activity_registro_de_notificacion.xml	(date 1713157356592)
@@ -0,0 +1,58 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    app:layout_constrainedHeight="true"
+    tools:context=".view.activities.notificaciones.RegistroDeNotificacionActivity">
+
+    <androidx.appcompat.widget.Toolbar
+        android:id="@+id/tb_noti_rnotificaciones"
+        android:layout_width="match_parent"
+        android:layout_height="?android:attr/actionBarSize"
+        android:background="@color/toolbar"
+        android:elevation="24dp"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent">
+
+        <LinearLayout
+            android:layout_width="match_parent"
+            android:layout_height="match_parent"
+            android:gravity="center_vertical"
+            android:orientation="horizontal">
+
+            <ImageView
+                android:id="@+id/back"
+                android:layout_width="wrap_content"
+                android:layout_height="45dp"
+                android:paddingStart="16dp"
+                android:paddingEnd="16dp"
+                android:src="@drawable/baseline_arrow_back_24" />
+
+            <TextView
+                android:id="@+id/tv_title_control_noticia"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_weight="1"
+                android:fontFamily="@font/librefranklin_mediumitalic"
+                android:gravity="start|center_vertical"
+                android:paddingStart="4dp"
+                android:text="Redactar Notificaciones"
+                android:textColor="@color/white"
+                android:textSize="25sp"
+                android:textStyle="bold" />
+        </LinearLayout>
+    </androidx.appcompat.widget.Toolbar>
+
+    <androidx.fragment.app.FragmentContainerView
+        android:id="@+id/fcv_rnotificaciones_main"
+        android:layout_width="0dp"
+        android:layout_height="0dp"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toBottomOf="@+id/tb_noti_rnotificaciones"/>
+
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/res/layout/fragment_registro_de_noticiaciones.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_registro_de_noticiaciones.xml b/app/src/main/res/layout/fragment_registro_de_noticiaciones.xml
new file mode 100644
--- /dev/null	(date 1713157356600)
+++ b/app/src/main/res/layout/fragment_registro_de_noticiaciones.xml	(date 1713157356600)
@@ -0,0 +1,139 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout
+    xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:tools="http://schemas.android.com/tools"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    android:background="@color/md_theme_dark_outline"
+    tools:context=".view.fragments.RegistroDeNotificacionFragment">
+
+    <androidx.constraintlayout.widget.Guideline
+        android:id="@+id/guideline_start"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:orientation="vertical"
+        app:layout_constraintGuide_percent="0.1" />
+    <androidx.constraintlayout.widget.Guideline
+        android:id="@+id/guideline_end"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:orientation="vertical"
+        app:layout_constraintGuide_percent="0.9" />
+    <androidx.cardview.widget.CardView
+        android:id="@+id/cv_nombre"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        app:cardCornerRadius="16dp"
+        app:cardElevation="34dp"
+        android:layout_marginBottom="40dp"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="@id/guideline_end"
+        app:layout_constraintStart_toStartOf="@id/guideline_start"
+        app:layout_constraintTop_toTopOf="parent">
+        <FrameLayout
+            android:layout_width="match_parent"
+            android:layout_height="match_parent">
+            <LinearLayout
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:orientation="vertical"
+                android:paddingHorizontal="24dp"
+                android:paddingTop="32dp"
+                android:paddingBottom="24dp"
+                android:layout_marginLeft="12dp"
+                android:layout_marginRight="12dp">
+                <LinearLayout
+                    android:layout_width="match_parent"
+                    android:layout_height="wrap_content"
+                    android:orientation="vertical"
+                    android:layout_marginTop="8dp"
+                    android:layout_marginBottom="8dp">
+                    <TextView
+                        android:layout_width="match_parent"
+                        android:layout_height="wrap_content"
+                        android:text="Titulo:"
+                        android:maxLines="1"
+                        android:ellipsize="end"
+                        android:textSize="20sp"
+                        android:textStyle="bold" />
+                    <EditText
+                        android:id="@+id/txt_NotiTitulo"
+                        android:layout_width="match_parent"
+                        android:layout_height="25dp"
+                        android:layout_gravity="left"
+                        app:layout_constrainedHeight="true"
+                        android:textSize="15sp"
+                        android:textStyle="bold"
+                        android:background="@color/nude"
+                        android:inputType="text" />
+                    <TextView
+                        android:layout_width="match_parent"
+                        android:layout_height="wrap_content"
+                        android:text="Descripción:"
+                        android:maxLines="1"
+                        android:ellipsize="end"
+                        android:textSize="20sp"
+                        android:textStyle="bold" />
+                    <EditText
+                        android:id="@+id/txt_NotiDescrip"
+                        android:layout_width="match_parent"
+                        android:layout_height="25dp"
+                        android:layout_gravity="left"
+                        app:layout_constrainedHeight="true"
+                        android:textSize="15sp"
+                        android:textStyle="bold"
+                        android:background="@color/nude"
+                        android:inputType="text" />
+                </LinearLayout>
+                <LinearLayout
+                    android:layout_width="match_parent"
+                    android:layout_height="wrap_content"
+                    android:orientation="vertical"
+                    android:layout_marginTop="4dp"
+                    android:layout_marginBottom="8dp">
+                    <TextView
+                        android:layout_width="match_parent"
+                        android:layout_height="wrap_content"
+                        android:text="Destinatario:"
+                        android:maxLines="1"
+                        android:ellipsize="end"
+                        android:textSize="20sp"
+                        android:textStyle="bold" />
+                    <AutoCompleteTextView
+                        android:id="@+id/autoCompleteTextView"
+                        android:layout_width="match_parent"
+                        android:layout_height="wrap_content"
+                        android:hint="Buscar destinatario"
+                        android:background="@color/nude"
+                        android:textSize="15sp"
+                        android:textStyle="bold"
+                        android:inputType="text" />
+
+                </LinearLayout>
+            </LinearLayout>
+            <com.google.android.material.progressindicator.CircularProgressIndicator
+                android:id="@+id/pb_nombre"
+                android:layout_gravity="center"
+                android:indeterminate="true"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"/>
+        </FrameLayout>
+    </androidx.cardview.widget.CardView>
+    <Button
+        android:id="@+id/fg_btn_funcion"
+        android:layout_width="300dp"
+        android:layout_height="wrap_content"
+        android:layout_gravity="center"
+        android:textColor="@color/white"
+        android:textSize="35sp"
+        android:layout_marginVertical="15dp"
+        android:text="Enviar"
+        android:backgroundTint="@color/md_theme_light_tertiary"
+        android:padding="0dp"
+        android:fontFamily="@font/librefranklin_extrabolditalic"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toBottomOf="@+id/cv_nombre" />
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/java/com/javierprado/jmapp/view/login/OptionLogin.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.javierprado.jmapp.view.login\r\n\r\nimport android.content.Intent\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport android.view.View\r\nimport android.widget.LinearLayout\r\nimport com.javierprado.jmapp.R\r\n\r\nclass OptionLogin : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_option_login)\r\n\r\n        // Obteniendo referencias a los layouts de Administrador, Apoderado y Docente\r\n        val lyAdmin = findViewById<LinearLayout>(R.id.lyAdmin)\r\n        val lyApoderado = findViewById<LinearLayout>(R.id.lyApoderado)\r\n        val lyDocente = findViewById<LinearLayout>(R.id.lyDocente)\r\n\r\n        // Agregando listeners de clics a los layouts\r\n        lyAdmin.setOnClickListener {\r\n            // Abrir la actividad de login para el Administrador\r\n            val intent = Intent(this@OptionLogin, LoginAdmin::class.java)\r\n            intent.flags = Intent.FLAG_ACTIVITY_CLEAR_TOP or Intent.FLAG_ACTIVITY_SINGLE_TOP\r\n            startActivity(intent)\r\n        }\r\n\r\n        lyApoderado.setOnClickListener {\r\n            // Abrir la actividad de login para el Apoderado\r\n            val intent = Intent(this@OptionLogin, LoginActivity::class.java)\r\n            intent.flags = Intent.FLAG_ACTIVITY_CLEAR_TOP or Intent.FLAG_ACTIVITY_SINGLE_TOP\r\n            startActivity(intent)\r\n        }\r\n\r\n        lyDocente.setOnClickListener {\r\n            // Abrir la actividad de login para el Docente\r\n            val intent = Intent(this@OptionLogin, LoginDocente::class.java)\r\n            intent.flags = Intent.FLAG_ACTIVITY_CLEAR_TOP or Intent.FLAG_ACTIVITY_SINGLE_TOP\r\n            startActivity(intent)\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/javierprado/jmapp/view/login/OptionLogin.kt b/app/src/main/java/com/javierprado/jmapp/view/login/OptionLogin.kt
--- a/app/src/main/java/com/javierprado/jmapp/view/login/OptionLogin.kt	(revision c1aa4bdc4442c527da4d4676528490a2d372f19b)
+++ b/app/src/main/java/com/javierprado/jmapp/view/login/OptionLogin.kt	(date 1713157359400)
@@ -6,6 +6,7 @@
 import android.view.View
 import android.widget.LinearLayout
 import com.javierprado.jmapp.R
+import com.javierprado.jmapp.view.activities.menus.MenuAdministradorActivity
 
 class OptionLogin : AppCompatActivity() {
     override fun onCreate(savedInstanceState: Bundle?) {
